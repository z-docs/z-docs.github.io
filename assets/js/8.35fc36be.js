(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{230:function(t,s,a){t.exports=a.p+"assets/img/2019-01-26-20-31-01.1111ed3e.png"},231:function(t,s,a){t.exports=a.p+"assets/img/2019-01-26-20-48-17.355a4122.png"},232:function(t,s,a){t.exports=a.p+"assets/img/2019-01-26-20-49-31.97a995ee.png"},233:function(t,s,a){t.exports=a.p+"assets/img/2019-01-26-20-49-57.b26088d8.png"},234:function(t,s,a){t.exports=a.p+"assets/img/2019-01-26-20-50-26.aa2a1843.png"},240:function(t,s,a){"use strict";a.r(s);var n=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"monitoring-hands-on"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#monitoring-hands-on"}},[t._v("#")]),t._v(" Monitoring Hands-On")]),t._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("ul",[n("li",[t._v("Demo Application 을 Kubernetes cluster에 배포")]),t._v(" "),n("li",[t._v("Kubernetes로 부터 Micrometer 정보를 discovery")]),t._v(" "),n("li",[t._v("Target으로 부터 Pod 및 JVM metrics 수집")]),t._v(" "),n("li",[t._v("Grafana dashboard에서 Pod 및 JVM metrics 정보를 시각화")])])]),t._v(" "),n("p",[n("img",{attrs:{src:a(230),alt:""}})]),t._v(" "),n("h2",{attrs:{id:"step-01-application"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-01-application"}},[t._v("#")]),t._v(" Step 01. Application")]),t._v(" "),n("ol",[n("li",[t._v("Demo Application 다운로드\n"),n("ol",[n("li",[n("code",[t._v("git clone https://github.com/cnpst/sam-zcp-lab")])]),t._v(" "),n("li",[n("code",[t._v("cd sam-zcp-lab")])])])]),t._v(" "),n("li",[t._v("Maven Dependency 설정 : micrometer 추가, spring-actuator")])]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-actuator"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Micormeter core dependecy  --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("io.micrometer"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("micrometer-core"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Micrometer Prometheus registry  --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("io.micrometer"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("micrometer-registry-prometheus"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[t._v("springboot(application.yaml) properties 수정")])]),t._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Metrics related configurations")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("management")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8090")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("endpoint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metrics")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enabled")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prometheus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enabled")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("endpoints")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("web")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("base-path")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("exposure")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("include")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metrics")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("export")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prometheus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enabled")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[t._v("maven build\n"),n("code",[t._v("mvn clean package")])])]),t._v(" "),n("h2",{attrs:{id:"step-02-docker-image"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-02-docker-image"}},[t._v("#")]),t._v(" Step 02. Docker Image")]),t._v(" "),n("ol",[n("li",[t._v("Dockerfile 작성")])]),t._v(" "),n("div",{staticClass:"language-Dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" openjdk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("jdk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("alpine\n\v"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ADD")]),t._v(" target/sample"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("0.0.1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("SNAPSHOT.jar app.jar\n\v"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENTRYPOINT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"java"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-Djava.security.egd=file:/dev/./urandom"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("”jar"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('","')]),t._v('/app.jar"'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\v\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("Docker Image Build\n"),n("ol",[n("li",[n("code",[t._v("docker build -t spring-boot-monitoring-demo .")])]),t._v(" "),n("li",[n("code",[t._v("docker images")])])])]),t._v(" "),n("li",[t._v("Application 실행/검증\n"),n("ol",[n("li",[n("code",[t._v("docker run -p 8080:8080 -p 8090:8090 spring-boot-monitoring-demo")])]),t._v(" "),n("li",[n("code",[t._v("curl localhost:8080")])])])]),t._v(" "),n("li",[t._v("Metric 확인 : "),n("code",[t._v("curl localhost:8090/prometheus")])]),t._v(" "),n("li",[t._v("Docker image Push to Registry\n"),n("ul",[n("li",[n("code",[t._v("docker tag spring-boot-monitoring-demo:[VERSION] [REPOSITORY_ADDRESS]/spring-boot-monitoring-demo:[VERSION]")])]),t._v(" "),n("li",[n("code",[t._v("docker push [REPOSITORY_ADDRESS]/spring-boot-monitoring-demo:[VERSION]")])])])])]),t._v(" "),n("h2",{attrs:{id:"step-03-kubernetes-deploy"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-03-kubernetes-deploy"}},[t._v("#")]),t._v(" Step 03. Kubernetes Deploy")]),t._v(" "),n("ol",[n("li",[t._v("deployment.yaml\n"),n("ul",[n("li",[t._v("spec.template.metadata.annotations.prometheus.io/scrape : Discorvery 대상 여부")]),t._v(" "),n("li",[t._v("spec.template.metadata.annotations.prometheus.io/port : Discovery target port")]),t._v(" "),n("li",[t._v("spec.template.metadata.annotations.prometheus.io/path : Discovery target path")])])])]),t._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\v  \n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\v\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\v      \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\v      \n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("annotations")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\v        \n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prometheus.io/scrape")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(' "true"\v\n        '),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prometheus.io/port")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(' "8090"\v\n        '),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prometheus.io/path")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /prometheus\v\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\v\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\v\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" spring"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("boot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cicd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("demo\v\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cloudzcp/spring"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("boot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("monitoring"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("demo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("latest\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("Demo Application 배포\n"),n("ul",[n("li",[n("code",[t._v("kubectl apply -f k8s/deployment.yaml")])])])]),t._v(" "),n("li",[t._v("Metric확인\n"),n("ul",[n("li",[n("code",[t._v("kubectl port-forward spring-boot-cicd-demo-5795695496-ljfkw 8090:8090")])]),t._v(" "),n("li",[n("code",[t._v("curl localost:8090")])]),t._v(" "),n("li",[t._v("결과\n"),n("ul",[n("li",[n("code",[t._v('jvm_memory_used_bytes{area="heap",id="PS Survivor Space",} 4390912.0')])]),t._v(" "),n("li",[n("code",[t._v('jvm_memory_used_bytes{area="heap",id="PS Old Gen",} 1.6629768E7')])])])])])])]),t._v(" "),n("h2",{attrs:{id:"step-04-dashboard-구성"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-04-dashboard-구성"}},[t._v("#")]),t._v(" Step 04. Dashboard 구성")]),t._v(" "),n("ol",[n("li",[t._v("Import 메뉴 Click")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(231),alt:""}})]),t._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[n("em",[t._v("Upload .json File")]),t._v(" Click")]),t._v(" "),n("li",[t._v("다운로드 받은 sam-zcp-lab 프로젝트 > grafana > micrometer-grafana-dashboard.json 파일 import")]),t._v(" "),n("li",[t._v("Options > prometheus combo box > prometheus data source 선택 > "),n("code",[t._v("Import")]),t._v(" 버튼 선택")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(232),alt:""}})]),t._v(" "),n("ol",{attrs:{start:"5"}},[n("li",[n("p",[t._v("Heap Memory, Threads, Class Loading, Open File, GC 등에 대한 metrics을 그래프 형태로 조회")]),t._v(" "),n("p",[n("img",{attrs:{src:a(233),alt:""}})])]),t._v(" "),n("li",[n("p",[t._v("기타 Dashboard")]),t._v(" "),n("p",[n("img",{attrs:{src:a(234),alt:""}})])])]),t._v(" "),n("hr"),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#monitoring-hands-on"}},[t._v("Monitoring Hands-On")]),n("ul",[n("li",[n("a",{attrs:{href:"#step-01.-application"}},[t._v("Step 01. Application")])]),n("li",[n("a",{attrs:{href:"#step-02.-docker-image"}},[t._v("Step 02. Docker Image")])]),n("li",[n("a",{attrs:{href:"#step-03.-kubernetes-deploy"}},[t._v("Step 03. Kubernetes Deploy")])]),n("li",[n("a",{attrs:{href:"#step-04.-dashboard-%EA%B5%AC%EC%84%B1"}},[t._v("Step 04. Dashboard 구성")])])])])])]),n("p")])}],e=a(0),r=Object(e.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),n,!1,null,null,null);s.default=r.exports}}]);